(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/money-logo-green.16c2e08e.png"},34:function(e,t,a){e.exports=a.p+"static/media/money-logo .6aef8ac7.png"},38:function(e,t,a){e.exports=a(59)},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),i=a(22),l=(a(43),a(10)),s=a(4),u=a(14),d=a(8),m=a(9),p=a(12),h=a(11),E=a(19),b=a(3),f=a(24),v=a.n(f),y=a(32),O=function(e){return{type:"GET_CURRENCIES",acronym:Object.keys(e).filter((function(e){return"USDT"!==e}))}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var a=Object(y.a)(v.a.mark((function a(n){var r,c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return r=a.sent,a.next=5,r.json();case 5:return c=a.sent,a.abrupt("return",n(e(c,t)));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},j=function(e,t){return{type:"STORE_EXPENSE",expense:Object(b.a)(Object(b.a)({},t),{},{exchangeRates:e})}},x=function(e){return{type:"EDIT_EXPENSE",actionState:e}},C=a(33),w=a.n(C),S=(a(49),/\S+@\S+\.\S+/),T=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r),(function(){return n.validateLogin()}))},n.validateLogin=function(){var e=n.state,t=e.password,a=e.email,r=t.length>=6,c=S.test(a);n.setState({isDisabled:!(c&&r)})},n.handleSubmit=function(e){var t=n.props,a=t.history.push,r=t.setUser,c=n.state.email;e.preventDefault(),r(c),a("/carteira")},n.state={email:"",password:"",isDisabled:!0,passwordType:"password"},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,c=t.isDisabled,o=t.passwordType,i=this.handleChange,l=this.handleSubmit;return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{className:"form"},r.a.createElement("img",{src:w.a,alt:"",className:"logo"}),r.a.createElement("input",{type:"text","data-testid":"email-input",name:"email",value:a,onChange:i,className:"input",placeholder:"Digite o seu E-mail"}),r.a.createElement("div",null,r.a.createElement("input",{type:o,"data-testid":"password-input",name:"password",value:n,onChange:i,className:"input password",placeholder:"Digite sua Senha"}),"password"===o?r.a.createElement(E.b,{onClick:function(){return e.setState({passwordType:"text"})},className:"eyes"}):r.a.createElement(E.c,{onClick:function(){return e.setState({passwordType:"password"})},className:"eyes"})),r.a.createElement("button",{type:"submit",disabled:c,onClick:l,className:"login-button"},"Entrar")))}}]),a}(n.Component),D=Object(l.b)(null,(function(e){return{setUser:function(t){return e(function(e){return{type:"ADD_EMAIL",email:e}}(t))}}}))(T),N=a(17),k=(a(50),["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]),M=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],I={value:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",description:"",id:""},F=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t,a=e.target,r=a.name,c=a.value,o=n.props.expenses;n.setState((t={},Object(u.a)(t,r,c),Object(u.a)(t,"id",o.length),t))},n.mapOptions=function(e){return e.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))},n.handleSubmit=function(e){var t=Object(N.a)(n),a=t.state,r=t.props.fetchAcronym;e.preventDefault(),r(j,a),n.setState(I)},n.state=I,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.value,n=t.currency,c=t.method,o=t.tag,i=t.description,l=t.id,s=this.handleChange,u=this.handleSubmit;return r.a.createElement("div",{className:"wallet-form-container"},r.a.createElement("form",{className:"wallet-form"},r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{type:"number",name:"value",id:"value","data-testid":"value-input",onChange:s,value:a})),r.a.createElement("label",{htmlFor:"currencies"},"Moedas:",r.a.createElement("select",{name:"currency",id:"currencies",onChange:s,value:n,"data-testid":"currency-input"},this.mapOptions(e))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento:",r.a.createElement("select",{name:"method",id:"method","data-testid":"method-input",onChange:s,value:c},this.mapOptions(k))),r.a.createElement("label",{htmlFor:"tag"},"Categoria:",r.a.createElement("select",{name:"tag",id:"tag","data-testid":"tag-input",onChange:s,value:o},this.mapOptions(M))),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",name:"description",id:"description","data-testid":"description-input",onChange:s,value:i})),r.a.createElement("button",{type:"submit",onClick:u,id:l,className:"submit-btn"},"Adicionar despesa")))}}]),a}(n.Component),A=Object(l.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses}}),(function(e){return{fetchAcronym:function(t,a){return e(g(t,a))},editExpen:function(t){return e(x(t))}}}))(F),R=a(34),_=a.n(R),L=(a(51),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).formatMoney=function(e){return parseFloat(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.total,n=this.formatMoney;return r.a.createElement("header",{className:"header-container"},r.a.createElement("img",{src:_.a,alt:"",className:"header-logo"}),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("span",{"data-testid":"total-field"},n(a>0?a:0)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),a}(n.Component)),P=a(35),B=(a(52),["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"]),U=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleEditorMode=function(t){var a=e.props,n=a.expenses,r=a.editMode,c=n.filter((function(e){return e.id===t}));r(t,c)},e.renderTableHeader=function(){return B.map((function(e){return r.a.createElement("th",{key:e},e)}))},e.renderTableBody=function(){var t=e.props,a=t.expenses,n=t.delExpense;return a.map((function(t){var a=t.value,c=t.currency,o=t.method,i=t.tag,l=t.description,s=t.exchangeRates,u=t.id,d=s[c],m=d.ask,p=d.name;return r.a.createElement("tr",{key:u},r.a.createElement("td",null,l),r.a.createElement("td",null,i),r.a.createElement("td",null,o),r.a.createElement("td",null,parseFloat(a).toFixed(2)),r.a.createElement("td",null,p),r.a.createElement("td",null,parseFloat(m).toFixed(2)),r.a.createElement("td",null,(m*a).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return e.handleEditorMode(u)},className:"edit"},r.a.createElement(E.a,null)),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return n(u)},className:"delet"},r.a.createElement(P.a,null))))}))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},r.a.createElement("thead",null,r.a.createElement("tr",{key:""},this.renderTableHeader())),r.a.createElement("tbody",null,this.renderTableBody())))}}]),a}(n.Component),X=Object(l.b)(null,(function(e){return{delExpense:function(t){return e({type:"DEL_EXPENSE",actionId:t})},editMode:function(t,a){return e({type:"EDITOR_MODE",actionId:t,editorExpense:a})}}}))(U),G=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],V=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.mapOptions=function(e){return e.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))},n.handleEdit=function(e){var t=Object(N.a)(n),a=t.state,r=t.props.editExpen;e.preventDefault(),r(a)};var c=n.props.editorExpense;return n.state=c,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.value,n=t.currency,c=t.method,o=t.tag,i=t.description,l=t.id,s=this.handleChange,u=this.handleEdit;return r.a.createElement("div",{className:"wallet-form-container"},r.a.createElement("form",{className:"wallet-form"},r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{type:"number",name:"value",id:"value","data-testid":"value-input",onChange:s,value:a})),r.a.createElement("label",{htmlFor:"currencies"},"Moedas:",r.a.createElement("select",{name:"currency",id:"currencies",onChange:s,value:n,"data-testid":"currency-input"},this.mapOptions(e))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento:",r.a.createElement("select",{name:"method",id:"method","data-testid":"method-input",onChange:s,value:c},this.mapOptions(G))),r.a.createElement("label",{htmlFor:"tag"},"Categoria:",r.a.createElement("select",{name:"tag",id:"tag","data-testid":"tag-input",onChange:s,value:o},this.mapOptions(V))),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",name:"description",id:"description","data-testid":"description-input",onChange:s,value:i})),r.a.createElement("button",{type:"submit",onClick:u,id:l,className:"submit-btn"},"Editar despesa")))}}]),a}(n.Component),W=Object(l.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses,editorId:t.editorId,editorExpense:t.editorExpense}}),(function(e){return{editExpen:function(t){return e(x(t))}}}))(z),H=(a(53),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchAcronym,a=e.updateTotal;t(O),a()}},{key:"render",value:function(){var e=this.props,t=e.email,a=e.total,n=e.expenses,c=e.editorMode;return r.a.createElement("div",{className:"wallet"},r.a.createElement(L,{email:t,total:a}),c?r.a.createElement(W,null):r.a.createElement(A,null),r.a.createElement(X,{expenses:n}))}}]),a}(n.Component)),J=Object(l.b)((function(e){var t=e.user,a=e.wallet;return{email:t.email,expenses:a.expenses,total:a.total,editorMode:a.editorMode}}),(function(e){return{fetchAcronym:function(t){return e(g(t))},updateTotal:function(){return e({type:"GET_TOTAL"})}}}))(H);var $=function(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/carteira",component:J}),r.a.createElement(s.a,{exact:!0,path:"/",component:D}))},q=a(15),K=a(36),Q=a(37),Y={email:""},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.email;switch(a){case"ADD_EMAIL":return Object(b.a)(Object(b.a)({},e),{},{email:n});default:return e}},ee=a(27),te={currencies:[],expenses:[],total:0,editorMode:!1,editorId:"",editorExpense:{}},ae=function(e){var t=0;return e.forEach((function(e){var a=e.exchangeRates,n=e.currency,r=e.value,c=a[n].ask;t+=c*r})),t.toFixed(2)},ne=function(e,t){var a=t.expenses,n=t.editorId;return a.map((function(t){return t.id===n?Object(b.a)(Object(b.a)(Object(b.a)({},t),e),{},{id:n}):t}))},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.acronym,r=t.expense,c=t.actionId,o=t.editorExpense,i=t.actionState;switch(a){case"GET_CURRENCIES":return Object(b.a)(Object(b.a)({},e),{},{currencies:n});case"STORE_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:[].concat(Object(ee.a)(e.expenses),[r]),total:ae([].concat(Object(ee.a)(e.expenses),[r]))});case"DEL_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==c})),total:ae(e.expenses.filter((function(e){return e.id!==c})))});case"GET_TOTAL":return Object(b.a)(Object(b.a)({},e),{},{total:ae(e.expenses)});case"EDITOR_MODE":return Object(b.a)(Object(b.a)({},e),{},{editorMode:!0,editorId:c,editorExpense:o[0]});case"EDIT_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:ne(i,e),total:ae(ne(i,e)),editorMode:!1,editorId:"",editorExpense:{}});default:return e}},ce=Object(q.combineReducers)({user:Z,wallet:re}),oe=Object(q.createStore)(ce,Object(K.composeWithDevTools)(Object(q.applyMiddleware)(Q.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,{store:oe},r.a.createElement(i.a,{basename:"/trybe-wallet"},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.eaa42b2f.chunk.js.map